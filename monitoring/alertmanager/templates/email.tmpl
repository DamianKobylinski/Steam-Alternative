{{ define "email.default.subject" }}
[{{ .Status | toUpper }}] Steam Alternative Alert: {{ .GroupLabels.alertname }}
{{ end }}

{{ define "email.default.html" }}
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .alert { padding: 15px; margin: 10px 0; border-radius: 5px; }
    .critical { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    .warning { background-color: #fff3cd; border: 1px solid #ffeeba; color: #856404; }
    .resolved { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    .info { background-color: #e7f3ff; padding: 10px; border-radius: 5px; margin: 10px 0; }
    table { border-collapse: collapse; width: 100%; margin: 10px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    h1 { color: #333; }
    h2 { color: #666; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ðŸŽ® Steam Alternative - Alert Notification</h1>
  
  <div class="info">
    <strong>Status:</strong> {{ .Status | toUpper }}<br>
    <strong>Time:</strong> {{ .CommonAnnotations.time }}
  </div>

  {{ range .Alerts }}
  <div class="alert {{ if eq .Status "firing" }}{{ .Labels.severity }}{{ else }}resolved{{ end }}">
    <h2>{{ .Labels.alertname }}</h2>
    <table>
      <tr>
        <th>Property</th>
        <th>Value</th>
      </tr>
      <tr>
        <td><strong>Severity</strong></td>
        <td>{{ .Labels.severity }}</td>
      </tr>
      <tr>
        <td><strong>Instance</strong></td>
        <td>{{ .Labels.instance }}</td>
      </tr>
      <tr>
        <td><strong>Job</strong></td>
        <td>{{ .Labels.job }}</td>
      </tr>
      <tr>
        <td><strong>Summary</strong></td>
        <td>{{ .Annotations.summary }}</td>
      </tr>
      <tr>
        <td><strong>Description</strong></td>
        <td>{{ .Annotations.description }}</td>
      </tr>
      <tr>
        <td><strong>Started</strong></td>
        <td>{{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</td>
      </tr>
      {{ if eq .Status "resolved" }}
      <tr>
        <td><strong>Resolved</strong></td>
        <td>{{ .EndsAt.Format "2006-01-02 15:04:05 MST" }}</td>
      </tr>
      {{ end }}
    </table>
  </div>
  {{ end }}

  <hr>
  <p style="color: #666; font-size: 12px;">
    This alert was generated by Steam Alternative Monitoring System.<br>
    Dashboard: <a href="http://localhost:3001">Grafana Dashboard</a>
  </p>
</body>
</html>
{{ end }}
